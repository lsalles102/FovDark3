<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            {% block title %}FovDark - Aim Assist Premium{% endblock %}
        </title>

        <!-- SEO Meta Tags -->
        <meta
            name="description"
            content="FovDark - O aimbot mais avan√ßado para BloodStrike. Recursos premium, anti-detec√ß√£o e suporte 24/7."
        />
        <meta
            name="keywords"
            content="aimbot, aim assist, BloodStrike, gaming, precision, anti-cheat"
        />
        <meta name="author" content="FovDark" />

        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="/static/favicon.ico" />

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/static/style.css" />

        <!-- MercadoPago SDK Loading -->
        <script>
            console.log('üîß Preparando carregamento do MercadoPago SDK...');

            // Estado global para controle de carregamento
            window.mercadoPagoSDKState = {
                loaded: false,
                loading: false,
                error: null
            };

            // Fun√ß√£o para verificar se MercadoPago est√° realmente dispon√≠vel
            window.checkMercadoPagoAvailability = function() {
                return typeof MercadoPago !== 'undefined' && 
                       MercadoPago !== null && 
                       typeof MercadoPago === 'function';
            };
        </script>


        {% block extra_head %}{% endblock %}
    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="/" class="brand-link">
                        <i class="fas fa-crosshairs"></i>
                        <span>FovDark</span>
                    </a>
                </div>

                <div class="nav-menu">
                    <a href="/" class="nav-link">
                        <i class="fas fa-home"></i>
                        <span>In√≠cio</span>
                    </a>
                    <a href="/comprar" class="nav-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Comprar</span>
                    </a>
                    <a href="/softwares" class="nav-link">
                        <i class="fas fa-download"></i>
                        <span>Softwares</span>
                    </a>
                    <a href="/isos" class="nav-link">
                        <i class="fas fa-compact-disc"></i>
                        <span>ISOs</span>
                    </a>
                    <a href="/otimizadores" class="nav-link">
                        <i class="fas fa-rocket"></i>
                        <span>Otimizadores</span>
                    </a>
                    <a href="/login" class="nav-link login-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login</span>
                    </a>
                    <a href="/register" class="nav-link register-btn">
                        <i class="fas fa-user-plus"></i>
                        <span>Registrar</span>
                    </a>
                </div>

                <div class="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">{% block content %}{% endblock %}</main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>FovDark</h3>
                        <p>
                            Sistema avan√ßado Anti-Detection. Precis√£o letal,
                            vantagem total.
                        </p>
                    </div>

                    <div class="footer-section">
                        <h4>Links R√°pidos</h4>
                        <ul>
                            <li><a href="/">In√≠cio</a></li>
                            <li><a href="/comprar">Comprar</a></li>
                            <li><a href="/painel">Painel</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>Suporte</h4>
                        <ul>
                            <li><a href="#">Discord</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>&copy; 2024 FovDark. Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>

        <!-- Scripts -->
        <!-- MercadoPago SDK (carregado primeiro) -->
        <script src="https://sdk.mercadopago.com/js/v2" crossorigin="anonymous" onload="console.log('‚úÖ MercadoPago SDK carregado');" onerror="console.error('‚ùå Erro ao carregar MercadoPago SDK');"></script>

        <!-- Scripts customizados (carregados ap√≥s o SDK) -->
        <script>
            // Fun√ß√£o para garantir HTTPS na URL
            function ensureHttpsUrl(url) {
                if (url.startsWith('http://') && window.location.protocol === 'https:') {
                    return url.replace('http://', 'https://');
                }
                return url;
            }

            // Aguardar carregamento completo do MercadoPago SDK
            function waitForMercadoPago(callback, maxAttempts = 30) {
                let attempts = 0;
                const interval = setInterval(() => {
                    attempts++;
                    if (typeof MercadoPago !== 'undefined') {
                        clearInterval(interval);
                        console.log('‚úÖ MercadoPago dispon√≠vel globalmente');
                        callback();
                    } else if (attempts >= maxAttempts) {
                        clearInterval(interval);
                        console.error('‚ùå Timeout aguardando MercadoPago SDK');
                    } else {
                        console.log(`üîÑ Tentativa ${attempts}: Aguardando MercadoPago...`);
                    }
                }, 100);
            }

            // Carregar scripts personalizados ap√≥s MercadoPago estar dispon√≠vel
            document.addEventListener('DOMContentLoaded', function() {
                waitForMercadoPago(function() {
                    // Carregar mercadopago-init.js com HTTPS garantido
                    const mercadopagoScript = document.createElement('script');
                    let mercadopagoUrl = "{{ url_for('static', path='mercadopago-init.js') }}";
                    mercadopagoScript.src = ensureHttpsUrl(mercadopagoUrl);
                    mercadopagoScript.crossOrigin = 'anonymous';
                    mercadopagoScript.onload = function() {
                        console.log('‚úÖ mercadopago-init.js carregado via HTTPS');
                        // Carregar script.js ap√≥s mercadopago-init.js
                        const mainScript = document.createElement('script');
                        let mainScriptUrl = "{{ url_for('static', path='script.js') }}";
                        mainScript.src = ensureHttpsUrl(mainScriptUrl);
                        mainScript.crossOrigin = 'anonymous';
                        mainScript.onload = function() {
                            console.log('‚úÖ script.js carregado via HTTPS');
                        };
                        document.head.appendChild(mainScript);
                    };
                    mercadopagoScript.onerror = function() {
                        console.error('‚ùå Erro ao carregar mercadopago-init.js');
                    };
                    document.head.appendChild(mercadopagoScript);
                });
            });
        </script>

        {% block scripts %}{% endblock %}
    </body>
</html>